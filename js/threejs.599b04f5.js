(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["threejs"],{"1bf9":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper pa-4"},[t("h1",[e._v("立方体放在文字段落的中间")]),e._m(0),t("highlightjs",{staticClass:"mt-4",attrs:{code:"#c {\n  float: left;\n  margin: 5px;\n  width: 300px;\n  height: 150px;\n}",language:"css"}})],1)},s=[function(){var e=this,t=e._self._c;return t("p",[e._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur, assumenda minus, tempora sit minima voluptates labore illo voluptas numquam libero praesentium soluta odit quo, qui fugit tenetur quos! Perferendis, eligendi? Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur, assumenda minus, tempora sit minima voluptates labore illo voluptas numquam libero praesentium soluta odit quo, qui fugit tenetur quos! Perferendis, eligendi? "),t("canvas",{attrs:{id:"c"}}),e._v(" Lorem, ipsum dolor sit amet consectetur adipisicing elit. Natus minus amet, porro molestiae quaerat rerum, sunt maxime excepturi corrupti delectus facilis voluptatibus itaque ipsa placeat dolore quas? Rerum, sit quasi. Lorem, ipsum dolor sit amet consectetur adipisicing elit. Natus minus amet, porro molestiae quaerat rerum, sunt maxime excepturi corrupti delectus facilis voluptatibus itaque ipsa placeat dolore quas? Rerum, sit quasi. ")])}],r=n("8bc7"),o={data(){return{fov:75,aspect:2,near:.1,far:5,boxWidth:1,boxHeight:1,boxDepth:1}},mounted(){this.main()},methods:{main(){const e=document.querySelector("#c"),t=new r["zb"]({antialias:!0,canvas:e}),{fov:n,aspect:i,near:s,far:o}=this,a=new r["Y"](n,i,s,o);console.log(t,"renderer 1",a,"camera 1"),a.position.x=0,a.position.z=3,a.position.y=.8;const l=new r["kb"],{boxWidth:c,boxHeight:h,boxDepth:u}=this,d=new r["d"](c,h,u),p=new r["O"]({color:4500104}),m=new r["M"](d,p);function g(e){e*=.001,m.rotation.x=e,m.rotation.y=e,x.forEach((t,n)=>{const i=1+.1*n,s=e*i;t.rotation.x=s,t.rotation.y=s}),t.render(l,a),requestAnimationFrame(g)}m.position.x=-.5,m.position.y=1.8,m.position.z=-1.8,l.add(m),t.render(l,a),requestAnimationFrame(g);const f=16777215,b=3,A=new r["j"](f,b);function v(e,t,n){const i=new r["O"]({color:t}),s=new r["M"](e,i);return l.add(s),s.position.x=n,s}A.position.set(-1,2,4),l.add(A);const x=[v(d,4500104,0),v(d,8930474,-2),v(d,11176004,2)];l.add(x)}}},a=o,l=(n("9353"),n("2be6")),c=Object(l["a"])(a,i,s,!1,null,"e07d5e7e",null);t["default"]=c.exports},"1d50":function(e,t,n){"use strict";n("b03e")},2014:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this;e._self._c;return e._m(0)},s=[function(){var e=this,t=e._self._c;return t("div",{},[t("canvas",{attrs:{id:"c"}})])}],r=n("8bc7"),o={data(){return{fov:75,aspect:2,near:.1,far:5,boxWidth:1,boxHeight:1,boxDepth:1}},mounted(){this.main()},methods:{main(){const e=document.querySelector("#c"),t=new r["zb"]({antialias:!0,canvas:e}),{fov:n,aspect:i,near:s,far:o}=this,a=new r["Y"](n,i,s,o);console.log(t,"renderer 1",a,"camera 1"),a.position.x=0,a.position.z=3,a.position.y=.8;const l=new r["kb"],{boxWidth:c,boxHeight:h,boxDepth:u}=this,d=new r["d"](c,h,u),p=new r["O"]({color:4500104}),m=new r["M"](d,p);function g(e){const t=e.domElement,n=t.clientWidth,i=t.clientHeight,s=t.width!==n||t.height!==i;return s&&e.setSize(n,i,!1),s}function f(e){if(e*=.001,g(t)){const e=t.domElement;a.aspect=e.clientWidth/e.clientHeight,a.updateProjectionMatrix()}const n=t.domElement;a.aspect=n.clientWidth/n.clientHeight,a.updateProjectionMatrix(),m.rotation.x=e,m.rotation.y=e,w.forEach((t,n)=>{const i=1+.1*n,s=e*i;t.rotation.x=s,t.rotation.y=s}),t.render(l,a),requestAnimationFrame(f)}m.position.x=-.5,m.position.y=1.8,m.position.z=-1.8,l.add(m),t.render(l,a),requestAnimationFrame(f);const b=16777215,A=3,v=new r["j"](b,A);function x(e,t,n){const i=new r["O"]({color:t}),s=new r["M"](e,i);return l.add(s),s.position.x=n,s}v.position.set(-1,2,4),l.add(v);const w=[x(d,4500104,0),x(d,8930474,-2),x(d,11176004,2)];l.add(w)}}},a=o,l=(n("1d50"),n("2be6")),c=Object(l["a"])(a,i,s,!1,null,"7e611231",null);t["default"]=c.exports},2063:function(e,t,n){},"2f5b":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("8bc7");function s(e,t){if(t===i["vb"])return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===i["tb"]||t===i["ub"]){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const s=n.count-2,r=[];if(t===i["tb"])for(let e=1;e<=s;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<s;e++)e%2===0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class r extends i["G"]{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new u(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new w(e)})),this.register((function(e){return new E(e)})),this.register((function(e){return new y(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new h(e)})),this.register((function(e){return new A(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new x(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new _(e)})),this.register((function(e){return new T(e)}))}load(e,t,n,s){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=i["H"].extractUrlBase(e);o=i["H"].resolveURL(t,this.path)}else o=i["H"].extractUrlBase(e);this.manager.itemStart(e);const a=function(t){s?s(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},l=new i["m"](this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{r.parse(n,o,(function(n){t(n),r.manager.itemEnd(e)}),a)}catch(i){a(i)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const r={},o={},l=new TextDecoder;if("string"===typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer){const t=l.decode(new Uint8Array(e,0,4));if(t===R){try{r[a.KHR_BINARY_GLTF]=new C(e)}catch(u){return void(i&&i(u))}s=JSON.parse(r[a.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e))}else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new te(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let a=0;a<this.pluginCallbacks.length;a++){const e=this.pluginCallbacks[a](h);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[e.name]=e,r[e.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const e=s.extensionsUsed[d],t=s.extensionsRequired||[];switch(e){case a.KHR_MATERIALS_UNLIT:r[e]=new c;break;case a.KHR_DRACO_MESH_COMPRESSION:r[e]=new M(s,this.dracoLoader);break;case a.KHR_TEXTURE_TRANSFORM:r[e]=new I;break;case a.KHR_MESH_QUANTIZATION:r[e]=new O;break;default:t.indexOf(e)>=0&&void 0===o[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}h.setExtensions(r),h.setPlugins(o),h.parse(n,i)}parseAsync(e,t){const n=this;return new Promise((function(i,s){n.parse(e,t,i,s)}))}}function o(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const a={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class l{constructor(e){this.parser=e,this.name=a.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,o=r.extensions&&r.extensions[this.name]||{},a=o.lights||[],l=a[e];let c;const h=new i["h"](16777215);void 0!==l.color&&h.setRGB(l.color[0],l.color[1],l.color[2],i["F"]);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new i["j"](h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new i["bb"](h),c.distance=u;break;case"spot":c=new i["pb"](h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Y(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(n,s),s}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json,s=i.nodes[e],r=s.extensions&&s.extensions[this.name]||{},o=r.light;return void 0===o?null:this._loadLight(o).then((function(e){return n._getNodeRef(t.cache,o,e)}))}}class c{constructor(){this.name=a.KHR_MATERIALS_UNLIT}getMaterialType(){return i["N"]}extendParams(e,t,n){const s=[];e.color=new i["h"](1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],i["F"]),e.opacity=t[3]}void 0!==r.baseColorTexture&&s.push(n.assignTexture(e,"map",r.baseColorTexture,i["jb"]))}return Promise.all(s)}}class h{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class u{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i["wb"](e,e)}return Promise.all(r)}}class d{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class p{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return void 0!==r.iridescenceFactor&&(t.iridescence=r.iridescenceFactor),void 0!==r.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),void 0!==r.iridescenceIor&&(t.iridescenceIOR=r.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==r.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),void 0!==r.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),void 0!==r.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(s)}}class m{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new i["h"](0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],i["F"])}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,i["jb"])),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class g{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return void 0!==r.transmissionFactor&&(t.transmission=r.transmissionFactor),void 0!==r.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(s)}}class f{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new i["h"]).setRGB(a[0],a[1],a[2],i["F"]),Promise.all(r)}}class b{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class A{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new i["h"]).setRGB(a[0],a[1],a[2],i["F"]),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,i["jb"])),Promise.all(r)}}class v{constructor(e){this.parser=e,this.name=a.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return t.bumpScale=void 0!==r.bumpFactor?r.bumpFactor:1,void 0!==r.bumpTexture&&s.push(n.assignTexture(t,"bumpMap",r.bumpTexture)),Promise.all(s)}}class x{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["P"]:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],r=i.extensions[this.name];return void 0!==r.anisotropyStrength&&(t.anisotropy=r.anisotropyStrength),void 0!==r.anisotropyRotation&&(t.anisotropyRotation=r.anisotropyRotation),void 0!==r.anisotropyTexture&&s.push(n.assignTexture(t,"anisotropyMap",r.anisotropyTexture)),Promise.all(s)}}class w{constructor(e){this.parser=e,this.name=a.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,r)}}class E{constructor(e){this.parser=e,this.name=a.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const r=s.extensions[t],o=i.images[r.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(s){if(s)return n.loadTextureImage(e,r.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class y{constructor(e){this.parser=e,this.name=a.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const r=s.extensions[t],o=i.images[r.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(s){if(s)return n.loadTextureImage(e,r.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class _{constructor(e){this.name=a.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(t){const n=e.byteOffset||0,i=e.byteLength||0,r=e.count,o=e.byteStride,a=new Uint8Array(t,n,i);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(r,o,a,e.mode,e.filter).then((function(e){return e.buffer})):s.ready.then((function(){const t=new ArrayBuffer(r*o);return s.decodeGltfBuffer(new Uint8Array(t),r,o,a,e.mode,e.filter),t}))}))}return null}}class T{constructor(e){this.name=a.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const s=t.meshes[n.mesh];for(const i of s.primitives)if(i.mode!==H.TRIANGLES&&i.mode!==H.TRIANGLE_STRIP&&i.mode!==H.TRIANGLE_FAN&&void 0!==i.mode)return null;const r=n.extensions[this.name],o=r.attributes,a=[],l={};for(const i in o)a.push(this.parser.getDependency("accessor",o[i]).then(e=>(l[i]=e,l[i])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],s=e[0].count,r=[];for(const o of n){const e=new i["L"],t=new i["xb"],n=new i["fb"],a=new i["xb"](1,1,1),c=new i["s"](o.geometry,o.material,s);for(let i=0;i<s;i++)l.TRANSLATION&&t.fromBufferAttribute(l.TRANSLATION,i),l.ROTATION&&n.fromBufferAttribute(l.ROTATION,i),l.SCALE&&a.fromBufferAttribute(l.SCALE,i),c.setMatrixAt(i,e.compose(t,n,a));for(const s in l)if("_COLOR_0"===s){const e=l[s];c.instanceColor=new i["r"](e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==s&&"ROTATION"!==s&&"SCALE"!==s&&o.geometry.setAttribute(s,l[s]);i["W"].prototype.copy.call(c,o),this.parser.assignFinalMaterial(c),r.push(c)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const R="glTF",S=12,L={JSON:1313821514,BIN:5130562};class C{constructor(e){this.name=a.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,S),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==R)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-S,s=new DataView(e,S);let r=0;while(r<i){const t=s.getUint32(r,!0);r+=4;const i=s.getUint32(r,!0);if(r+=4,i===L.JSON){const i=new Uint8Array(e,S+r,t);this.content=n.decode(i)}else if(i===L.BIN){const n=S+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class M{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=a.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const i in o){const e=B[i]||i.toLowerCase();a[e]=o[i]}for(const i in e.attributes){const t=B[i]||i.toLowerCase();if(void 0!==o[i]){const s=n.accessors[e.attributes[i]],r=j[s.componentType];c[t]=r.name,l[t]=!0===s.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t,n){s.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],i=l[t];void 0!==i&&(n.normalized=i)}t(e)}),a,c,i["F"],n)}))}))}}class I{constructor(){this.name=a.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class O{constructor(){this.name=a.KHR_MESH_QUANTIZATION}}class P extends i["v"]{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let r=0;r!==i;r++)t[r]=n[s+r];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=i-t,h=(n-t)/c,u=h*h,d=u*h,p=e*l,m=p-l,g=-2*d+3*u,f=d-u,b=1-g,A=f-u+h;for(let v=0;v!==o;v++){const e=r[m+v+o],t=r[m+v+a]*c,n=r[p+v+o],i=r[p+v]*c;s[v]=b*e+A*t+g*n+f*i}return s}}const k=new i["fb"];class N extends P{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return k.fromArray(s).normalize().toArray(s),s}}const H={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},j={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},D={9728:i["S"],9729:i["C"],9984:i["U"],9985:i["E"],9986:i["T"],9987:i["D"]},F={33071:i["g"],33648:i["R"],10497:i["ib"]},$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},B={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},U={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},z={CUBICSPLINE:void 0,LINEAR:i["x"],STEP:i["w"]},G={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function K(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new i["Q"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i["o"]})),e["DefaultMaterial"]}function V(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function Y(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function X(e,t,n){let i=!1,s=!1,r=!1;for(let c=0,h=t.length;c<h;c++){const e=t[c];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(s=!0),void 0!==e.COLOR_0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(e);const o=[],a=[],l=[];for(let c=0,h=t.length;c<h;c++){const h=t[c];if(i){const t=void 0!==h.POSITION?n.getDependency("accessor",h.POSITION):e.attributes.position;o.push(t)}if(s){const t=void 0!==h.NORMAL?n.getDependency("accessor",h.NORMAL):e.attributes.normal;a.push(t)}if(r){const t=void 0!==h.COLOR_0?n.getDependency("accessor",h.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then((function(t){const n=t[0],o=t[1],a=t[2];return i&&(e.morphAttributes.position=n),s&&(e.morphAttributes.normal=o),r&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}function q(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function W(e){let t;const n=e.extensions&&e.extensions[a.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Z(n.attributes):e.indices+":"+Z(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,s=e.targets.length;i<s;i++)t+=":"+Z(e.targets[i]);return t}function Z(e){let t="";const n=Object.keys(e).sort();for(let i=0,s=n.length;i<s;i++)t+=n[i]+":"+e[n[i]]+";";return t}function J(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Q(e){return e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"}const ee=new i["L"];class te{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new o,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;"undefined"!==typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||s&&r<98?this.textureLoader=new i["sb"](this.options.manager):this.textureLoader=new i["q"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i["m"](this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const r={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return V(s,r,i),Y(r,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(r)}))).then((function(){for(const e of r.scenes)e.updateMatrixWorld();e(r)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,r]of e.children.entries())s(r,t.children[i])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[a.KHR_BINARY_GLTF].body);const s=this.options;return new Promise((function(e,r){n.load(i["H"].resolveURL(t.uri,s.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse){const e=$[s.type],t=j[s.componentType],n=!0===s.normalized,r=new t(s.count*e);return Promise.resolve(new i["e"](r,e,n))}const r=[];return void 0!==s.bufferView?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=$[s.type],a=j[s.componentType],l=a.BYTES_PER_ELEMENT,c=l*o,h=s.byteOffset||0,u=void 0!==s.bufferView?n.bufferViews[s.bufferView].byteStride:void 0,d=!0===s.normalized;let p,m;if(u&&u!==c){const e=Math.floor(h/u),n="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count;let c=t.cache.get(n);c||(p=new a(r,e*u,s.count*u/l),c=new i["t"](p,u/l),t.cache.add(n,c)),m=new i["u"](c,o,h%u/l,d)}else p=null===r?new a(s.count*o):new a(r,h,s.count*o),m=new i["e"](p,o,d);if(void 0!==s.sparse){const t=$.SCALAR,n=j[s.sparse.indices.componentType],l=s.sparse.indices.byteOffset||0,c=s.sparse.values.byteOffset||0,h=new n(e[1],l,s.sparse.count*t),u=new a(e[2],c,s.sparse.count*o);null!==r&&(m=new i["e"](m.array.slice(),m.itemSize,m.normalized));for(let e=0,i=h.length;e<i;e++){const t=h[e];if(m.setX(t,u[e*o]),o>=2&&m.setY(t,u[e*o+1]),o>=3&&m.setZ(t,u[e*o+2]),o>=4&&m.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m}))}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e],s=i.source,r=t.images[s];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"===typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=r.samplers||{},l=n[o.sampler]||{};return t.magFilter=D[l.magFilter]||i["C"],t.minFilter=D[l.minFilter]||i["D"],t.wrapS=F[l.wrapS]||i["ib"],t.wrapT=F[l.wrapT]||i["ib"],s.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,s=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=n.getDependency("bufferView",o.bufferView).then((function(e){c=!0;const t=new Blob([e],{type:o.mimeType});return l=a.createObjectURL(t),l}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then((function(e){return new Promise((function(n,s){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new i["rb"](e);t.needsUpdate=!0,n(t)}),t.load(i["H"].resolveURL(e,r.path),o,void 0,s)}))})).then((function(e){return!0===c&&a.revokeObjectURL(l),Y(e,o),e.userData.mimeType=o.mimeType||Q(o.uri),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),e}));return this.sourceCache[e]=h,h}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then((function(r){if(!r)return null;if(void 0!==n.texCoord&&n.texCoord>0&&(r=r.clone(),r.channel=n.texCoord),s.extensions[a.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[a.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(r);r=s.extensions[a.KHR_TEXTURE_TRANSFORM].extendTexture(r,e),s.associations.set(r,t)}}return void 0!==i&&(r.colorSpace=i),e[t]=r,r}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new i["db"],i["J"].prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new i["z"],i["J"].prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(s||r||o){let e="ClonedMaterial:"+n.uuid+":";s&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),s&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return i["Q"]}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let o;const l={},c=r.extensions||{},h=[];if(c[a.KHR_MATERIALS_UNLIT]){const e=s[a.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),h.push(e.extendParams(l,r,t))}else{const n=r.pbrMetallicRoughness||{};if(l.color=new i["h"](1,1,1),l.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;l.color.setRGB(e[0],e[1],e[2],i["F"]),l.opacity=e[3]}void 0!==n.baseColorTexture&&h.push(t.assignTexture(l,"map",n.baseColorTexture,i["jb"])),l.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,l.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(h.push(t.assignTexture(l,"metalnessMap",n.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),h.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)}))))}!0===r.doubleSided&&(l.side=i["k"]);const u=r.alphaMode||G.OPAQUE;if(u===G.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,u===G.MASK&&(l.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==i["N"]&&(h.push(t.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new i["wb"](1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;l.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==i["N"]&&(h.push(t.assignTexture(l,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(l.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==i["N"]){const e=r.emissiveFactor;l.emissive=(new i["h"]).setRGB(e[0],e[1],e[2],i["F"])}return void 0!==r.emissiveTexture&&o!==i["N"]&&h.push(t.assignTexture(l,"emissiveMap",r.emissiveTexture,i["jb"])),Promise.all(h).then((function(){const n=new o(l);return r.name&&(n.name=r.name),Y(n,r),t.associations.set(n,{materials:e}),r.extensions&&V(s,n,r),n}))}createUniqueName(e){const t=i["eb"].sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(e){return n[a.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return ie(n,e,t)}))}const o=[];for(let l=0,c=e.length;l<c;l++){const n=e[l],c=W(n),h=s[c];if(h)o.push(h.promise);else{let e;e=n.extensions&&n.extensions[a.KHR_DRACO_MESH_COMPRESSION]?r(n):ie(new i["f"],n,t),s[c]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,o=n.meshes[e],a=o.primitives,l=[];for(let i=0,s=a.length;i<s;i++){const e=void 0===a[i].material?K(this.cache):this.getDependency("material",a[i].material);l.push(e)}return l.push(t.loadGeometries(a)),Promise.all(l).then((function(n){const l=n.slice(0,n.length-1),c=n[n.length-1],h=[];for(let d=0,p=c.length;d<p;d++){const n=c[d],u=a[d];let p;const m=l[d];if(u.mode===H.TRIANGLES||u.mode===H.TRIANGLE_STRIP||u.mode===H.TRIANGLE_FAN||void 0===u.mode)p=!0===o.isSkinnedMesh?new i["mb"](n,m):new i["M"](n,m),!0===p.isSkinnedMesh&&p.normalizeSkinWeights(),u.mode===H.TRIANGLE_STRIP?p.geometry=s(p.geometry,i["ub"]):u.mode===H.TRIANGLE_FAN&&(p.geometry=s(p.geometry,i["tb"]));else if(u.mode===H.LINES)p=new i["B"](n,m);else if(u.mode===H.LINE_STRIP)p=new i["y"](n,m);else if(u.mode===H.LINE_LOOP)p=new i["A"](n,m);else{if(u.mode!==H.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);p=new i["cb"](n,m)}Object.keys(p.geometry.morphAttributes).length>0&&q(p,o),p.name=t.createUniqueName(o.name||"mesh_"+e),Y(p,o),u.extensions&&V(r,p,u),t.assignFinalMaterial(p),h.push(p)}for(let i=0,s=h.length;i<s;i++)t.associations.set(h[i],{meshes:e,primitives:i});if(1===h.length)return o.extensions&&V(r,h[0],o),h[0];const u=new i["p"];o.extensions&&V(r,u,o),t.associations.set(u,{meshes:e});for(let e=0,t=h.length;e<t;e++)u.add(h[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(s)return"perspective"===n.type?t=new i["Y"](i["K"].radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===n.type&&(t=new i["X"](-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Y(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),s=e,r=[],o=[];for(let a=0,l=s.length;a<l;a++){const e=s[a];if(e){r.push(e);const t=new i["L"];null!==n&&t.fromArray(n.array,16*a),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new i["lb"](r,o)}))}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],h=[];for(let i=0,u=s.channels.length;i<u;i++){const e=s.channels[i],t=s.samplers[e.sampler],n=e.target,r=n.node,u=void 0!==s.parameters?s.parameters[t.input]:t.input,d=void 0!==s.parameters?s.parameters[t.output]:t.output;void 0!==n.node&&(o.push(this.getDependency("node",r)),a.push(this.getDependency("accessor",u)),l.push(this.getDependency("accessor",d)),c.push(t),h.push(n))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(h)]).then((function(e){const t=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=[];for(let i=0,r=t.length;i<r;i++){const e=t[i],r=s[i],h=o[i],u=a[i],d=l[i];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,r,h,u,d);if(p)for(let t=0;t<p.length;t++)c.push(p[t])}return new i["a"](r,void 0,c)}))}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),r=[],o=i.children||[];for(let l=0,c=o.length;l<c;l++)r.push(n.getDependency("node",o[l]));const a=void 0===i.skin?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(r),a]).then((function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(i,ee)}));for(let s=0,r=n.length;s<r;s++)t.add(n[s]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return l&&a.push(l),void 0!==r.camera&&a.push(s.getDependency("camera",r.camera).then((function(e){return s._getNodeRef(s.cameraCache,r.camera,e)}))),s._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===r.isBone?new i["b"]:t.length>1?new i["p"]:1===t.length?t[0]:new i["W"],a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=o),Y(a,r),r.extensions&&V(n,a,r),void 0!==r.matrix){const e=new i["L"];e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,r=new i["p"];n.name&&(r.name=s.createUniqueName(n.name)),Y(r,n),n.extensions&&V(t,r,n);const o=n.nodes||[],a=[];for(let i=0,l=o.length;i<l;i++)a.push(s.getDependency("node",o[i]));return Promise.all(a).then((function(e){for(let n=0,i=e.length;n<i;n++)r.add(e[n]);const t=e=>{const t=new Map;for(const[n,r]of s.associations)(n instanceof i["J"]||n instanceof i["rb"])&&t.set(n,r);return e.traverse(e=>{const n=s.associations.get(e);null!=n&&t.set(e,n)}),t};return s.associations=t(r),r}))}_createAnimationTracks(e,t,n,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];let c;switch(U[r.path]===U.weights?e.traverse((function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)})):l.push(a),U[r.path]){case U.weights:c=i["V"];break;case U.rotation:c=i["gb"];break;case U.position:case U.scale:c=i["yb"];break;default:switch(n.itemSize){case 1:c=i["V"];break;case 2:case 3:default:c=i["yb"];break}break}const h=void 0!==s.interpolation?z[s.interpolation]:i["x"],u=this._getArrayFromAccessor(n);for(let i=0,d=l.length;i<d;i++){const e=new c(l[i]+"."+U[r.path],t.array,u,h);"CUBICSPLINE"===s.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=J(t.constructor),n=new Float32Array(t.length);for(let i=0,s=t.length;i<s;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){const t=this instanceof i["gb"]?N:P;return new t(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ne(e,t,n){const s=t.attributes,r=new i["c"];if(void 0===s.POSITION)return;{const e=n.json.accessors[s.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new i["xb"](t[0],t[1],t[2]),new i["xb"](o[0],o[1],o[2])),e.normalized){const t=J(j[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new i["xb"],t=new i["xb"];for(let i=0,s=o.length;i<s;i++){const s=o[i];if(void 0!==s.POSITION){const i=n.json.accessors[s.POSITION],r=i.min,o=i.max;if(void 0!==r&&void 0!==o){if(t.setX(Math.max(Math.abs(r[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(r[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(r[2]),Math.abs(o[2]))),i.normalized){const e=J(j[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new i["nb"];r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}function ie(e,t,n){const s=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(const i in s){const t=B[i]||i.toLowerCase();t in e.attributes||r.push(o(s[i],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(i)}return i["i"].workingColorSpace!==i["F"]&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${i["i"].workingColorSpace}" not supported.`),Y(e,t),ne(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?X(e,t.targets,n):e}))}},"3eb8":function(e,t,n){"use strict";n.r(t);var i=n("7265"),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper pa-4"},[t("h1",[e._v("threejs canvas截图")]),e._m(0),t("p",[e._v(" 截图需要把render函数提出来 在截图前render函数执行一次 "),t("canvas",{staticStyle:{border:"1px solid",width:"100%","max-height":"20vh"},attrs:{id:"c3"}}),t(i["a"],{staticClass:"my-2",on:{click:e.screenShotDownload}},[e._v(" 截图并下载 ")]),t(i["a"],{staticClass:"my-2",on:{click:e.screenShot}},[e._v(" 截图 ")]),t("img",{staticStyle:{display:"none"},attrs:{id:"img",src:"",alt:"截图"}}),t("highlightjs",{staticClass:"mt-4",attrs:{code:"screenShotDownload() {\n  const saveBlob = (function() {\n  const a = document.createElement('a');\n    document.body.appendChild(a);\n    a.style.display = 'none';\n    return function saveData(blob, fileName) {\n      const url = window.URL.createObjectURL(blob);\n      a.href = url;\n      a.download = fileName;\n      a.click();\n    };\n  }());\n\n  this.render3();\n  const canvas = document.getElementById('c3');\n  canvas.toBlob((blob) => {\n    saveBlob(blob, 'screencapture.png');\n  });\n},\nscreenShot() {\n  this.render3();\n  const canvas = document.getElementById('c3');\n  const img = document.getElementById('img');\n  const url = canvas.toDataURL();\n  img.src = url;\n  img.style.display = 'block';\n},",language:"js"}})],1)])},r=[function(){var e=this,t=e._self._c;return t("p",[e._v(" 首先自适应宽度 根据canvas的实际宽高来渲染并不会导致失真 "),t("canvas",{staticStyle:{border:"1px solid",width:"100%","max-height":"20vh"},attrs:{id:"c2"}})])}],o=(n("6337"),n("b53d"),n("56b7"),n("8bc7")),a={data(){return{state3:{time:0},renderer3:null,scene:null,camera:null,cube:null}},mounted(){this.main2(),this.init3(),this.animate3(),requestAnimationFrame(this.animate3)},methods:{main2(){const e=document.querySelector("#c2"),t=new o["zb"]({antialias:!0,canvas:e}),n=new o["Y"](75,2,.1,5);n.position.x=0,n.position.z=3,n.position.y=.5;const i=new o["kb"],s=new o["d"](1,1,2),r=new o["O"]({color:"#FFDD11"}),a=new o["M"](s,r);i.add(a),t.render(i,n);const l=16777215,c=3,h=new o["j"](l,c);function u(e){const t=e.domElement,n=t.clientWidth,i=t.clientHeight,s=t.width!==n||t.height!==i;return s&&e.setSize(n,i,!1),s}function d(e){if(e*=.001,u(t)){const e=t.domElement;n.aspect=e.clientWidth/e.clientHeight,n.updateProjectionMatrix()}a.rotation.x=e,a.rotation.y=e,t.render(i,n),requestAnimationFrame(d)}h.position.set(-1,2,4),i.add(h),requestAnimationFrame(d)},init3(){const e=document.querySelector("#c3");this.renderer=new o["zb"]({antialias:!0,canvas:e}),this.camera=new o["Y"](75,2,.1,5),this.camera.position.x=0,this.camera.position.z=3,this.camera.position.y=.5,this.scene=new o["kb"];const t=new o["d"](1,1,2),n=new o["O"]({color:"#33DDee"});this.cube=new o["M"](t,n),this.scene.add(this.cube),this.renderer.render(this.scene,this.camera);const i=16777215,s=3,r=new o["j"](i,s);r.position.set(-1,2,4),this.scene.add(r)},resizeRendererToDisplaySize(e){const t=e.domElement,n=t.clientWidth,i=t.clientHeight,s=t.width!==n||t.height!==i;return s&&e.setSize(n,i,!1),s},render3(){const e=.1,t=this.state3.time*e;if(this.resizeRendererToDisplaySize(this.renderer)){const e=this.renderer.domElement;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix()}this.cube.rotation.x=t,this.cube.rotation.y=t,this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render3)},animate3(e){this.state3.time=.01*e,this.render3(),requestAnimationFrame(this.animate3)},screenShotDownload(){const e=function(){const e=document.createElement("a");return document.body.appendChild(e),e.style.display="none",function(t,n){const i=window.URL.createObjectURL(t);e.href=i,e.download=n,e.click()}}();this.render3();const t=document.getElementById("c3");t.toBlob(n=>{e(n,`screencapture-${t.width}x${t.height}.png`)})},screenShot(){this.render3();const e=document.getElementById("c3"),t=document.getElementById("img"),n=e.toDataURL();t.src=n,t.style.display="block"}}},l=a,c=(n("e8afc"),n("2be6")),h=Object(c["a"])(l,s,r,!1,null,"7fbec5a2",null);t["default"]=h.exports},"4dfd":function(e,t,n){},"51f6":function(e,t,n){"use strict";n("d8aa")},"56b7":function(e,t,n){"use strict";var i=n("d4cb"),s=n("70b7"),r=n("cf87"),o=URLSearchParams.prototype,a=s(o.forEach);i&&!("size"in o)&&r(o,"size",{get:function(){var e=0;return a(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"59bb":function(e,t,n){"use strict";n("aaf8")},"5b23":function(e,t,n){"use strict";n("4dfd")},6337:function(e,t,n){"use strict";var i=n("ef30"),s=n("70b7"),r=n("2a3e"),o=n("ae5d"),a=URLSearchParams,l=a.prototype,c=s(l.append),h=s(l["delete"]),u=s(l.forEach),d=s([].push),p=new a("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&i(l,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return h(this,e);var i=[];u(this,(function(e,t){d(i,{key:t,value:e})})),o(t,1);var s,a=r(e),l=r(n),p=0,m=0,g=!1,f=i.length;while(p<f)s=i[p++],g||s.key===a?(g=!0,h(this,s.key)):m++;while(m<f)s=i[m++],s.key===a&&s.value===l||c(this,s.key,s.value)}),{enumerable:!0,unsafe:!0})},"7f2f":function(e,t,n){},9353:function(e,t,n){"use strict";n("7f2f")},"9b30":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper pa-4"},[t("h1",[e._v("摄像机 改变镜头视角")]),e._m(0),t("p",[e._v(" 添加旋转镜头 "),t("highlightjs",{attrs:{code:"import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\n\n//.. init函数添加:\nconst controls = new OrbitControls( this.camera, canvas );\n// target\ncontrols.target.set( 0, 0, 0 );\ncontrols.update();",language:"js"}})],1),t("p",[e._v(" 再添加GUI控制面板 "),t("highlightjs",{attrs:{code:"import { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\n\n//.. init函数添加:\nclass MinMaxGUIHelper {\n\n  constructor( obj, minProp, maxProp, minDif ) {\n\n    this.obj = obj;\n    this.minProp = minProp;\n    this.maxProp = maxProp;\n    this.minDif = minDif;\n\n  }\n  get min() {\n\n    return this.obj[ this.minProp ];\n\n  }\n  set min( v ) {\n\n    this.obj[ this.minProp ] = v;\n    this.obj[ this.maxProp ] = Math.max( this.obj[ this.maxProp ], v + this.minDif );\n\n  }\n  get max() {\n\n    return this.obj[ this.maxProp ];\n\n  }\n  set max( v ) {\n\n    this.obj[ this.maxProp ] = v;\n    // eslint-disable-next-line\n    this.min = this.min; // this will call the min setter\n\n  }\n\n}\n// GUI\nconst gui = new GUI();\ngui.add( this.camera, 'fov', 1, 180 ).onChange( this.updateCamera );\nconst minMaxGUIHelper = new MinMaxGUIHelper( this.camera, 'near', 'far', 0.1 );\ngui.add( minMaxGUIHelper, 'min', 0.1, 50, 0.1 ).name( 'near' ).onChange( this.updateCamera );\ngui.add( minMaxGUIHelper, 'max', 0.1, 50, 0.1 ).name( 'far' ).onChange( this.updateCamera );\n// position\ngui.add( this.camera.position, 'x', -10, 10 ).name( 'cameraX' );\ngui.add( this.camera.position, 'y', -10, 10 ).name( 'cameraY' );\ngui.add( this.camera.position, 'z', -10, 10 ).name( 'cameraZ' );",language:"js"}})],1),t("p",[e._v(" 添加地面mesh "),t("highlightjs",{attrs:{code:"{\n  const planeSize = 10;\n  const loader = new THREE.TextureLoader();\n  const texture = loader.load( 'https://threejs.org/manual/examples/resources/images/checker.png' );\n  texture.wrapS = THREE.RepeatWrapping;\n  texture.wrapT = THREE.RepeatWrapping;\n  texture.magFilter = THREE.NearestFilter;\n  //texture.colorSpace = THREE.SRGBColorSpace;\n  const repeats = planeSize / 2;\n  texture.repeat.set( repeats, repeats );\n\n  const planeGeo = new THREE.PlaneGeometry( planeSize, planeSize );\n  const planeMat = new THREE.MeshPhongMaterial( {\n    map: texture,\n    side: THREE.DoubleSide,\n  } );\n  const mesh = new THREE.Mesh( planeGeo, planeMat );\n  mesh.rotation.x = Math.PI * - .5;\n  this.scene.add( mesh );\n}",language:"js"}})],1),e._m(1)])},s=[function(){var e=this,t=e._self._c;return t("p",[t("canvas",{staticStyle:{border:"1px solid",width:"100%"},attrs:{id:"c3"}})])},function(){var e=this,t=e._self._c;return t("p",[t("a",{attrs:{href:"https://threejs.org/manual/#zh/cameras"}},[e._v("https://threejs.org/manual/#zh/cameras")])])}],r=n("8bc7"),o=n("2f5b");const a={type:"change"},l={type:"start"},c={type:"end"},h=new r["hb"],u=new r["Z"],d=Math.cos(70*r["K"].DEG2RAD);class p extends r["l"]{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r["xb"],this.cursor=new r["xb"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r["I"].ROTATE,MIDDLE:r["I"].DOLLY,RIGHT:r["I"].PAN},this.touches={ONE:r["qb"].ROTATE,TWO:r["qb"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",fe),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",fe),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),s=i.NONE},this.update=function(){const t=new r["xb"],l=(new r["fb"]).setFromUnitVectors(e.up,new r["xb"](0,1,0)),c=l.clone().invert(),b=new r["xb"],A=new r["fb"],v=new r["xb"],x=2*Math.PI;return function(w=null){const E=n.object.position;t.copy(E).sub(n.target),t.applyQuaternion(l),p.setFromVector3(t),n.autoRotate&&s===i.NONE&&k(O(w)),n.enableDamping?(p.theta+=m.theta*n.dampingFactor,p.phi+=m.phi*n.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi);let y=n.minAzimuthAngle,_=n.maxAzimuthAngle;isFinite(y)&&isFinite(_)&&(y<-Math.PI?y+=x:y>Math.PI&&(y-=x),_<-Math.PI?_+=x:_>Math.PI&&(_-=x),p.theta=y<=_?Math.max(y,Math.min(_,p.theta)):p.theta>(y+_)/2?Math.max(y,p.theta):Math.min(_,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor);let T=!1;if(n.zoomToCursor&&L||n.object.isOrthographicCamera)p.radius=U(p.radius);else{const e=p.radius;p.radius=U(p.radius*g),T=e!=p.radius}if(t.setFromSpherical(p),t.applyQuaternion(c),E.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),f.set(0,0,0)),n.zoomToCursor&&L){let i=null;if(n.object.isPerspectiveCamera){const e=t.length();i=U(e*g);const s=e-i;n.object.position.addScaledVector(R,s),n.object.updateMatrixWorld(),T=!!s}else if(n.object.isOrthographicCamera){const e=new r["xb"](S.x,S.y,0);e.unproject(n.object);const s=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix(),T=s!==n.object.zoom;const o=new r["xb"](S.x,S.y,0);o.unproject(n.object),n.object.position.sub(o).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(h.origin.copy(n.object.position),h.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(h.direction))<d?e.lookAt(n.target):(u.setFromNormalAndCoplanarPoint(n.object.up,n.target),h.intersectPlane(u,n.target))))}else if(n.object.isOrthographicCamera){const e=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),e!==n.object.zoom&&(n.object.updateProjectionMatrix(),T=!0)}return g=1,L=!1,!!(T||b.distanceToSquared(n.object.position)>o||8*(1-A.dot(n.object.quaternion))>o||v.distanceToSquared(n.target)>o)&&(n.dispatchEvent(a),b.copy(n.object.position),A.copy(n.object.quaternion),v.copy(n.target),!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",ve),n.domElement.removeEventListener("pointerdown",ae),n.domElement.removeEventListener("pointercancel",ce),n.domElement.removeEventListener("wheel",de),n.domElement.removeEventListener("pointermove",le),n.domElement.removeEventListener("pointerup",ce);const e=n.domElement.getRootNode();e.removeEventListener("keydown",me,{capture:!0}),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",fe),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,p=new r["ob"],m=new r["ob"];let g=1;const f=new r["xb"],b=new r["wb"],A=new r["wb"],v=new r["wb"],x=new r["wb"],w=new r["wb"],E=new r["wb"],y=new r["wb"],_=new r["wb"],T=new r["wb"],R=new r["xb"],S=new r["wb"];let L=!1;const C=[],M={};let I=!1;function O(e){return null!==e?2*Math.PI/60*n.autoRotateSpeed*e:2*Math.PI/60/60*n.autoRotateSpeed}function P(e){const t=Math.abs(.01*e);return Math.pow(.95,n.zoomSpeed*t)}function k(e){m.theta-=e}function N(e){m.phi-=e}const H=function(){const e=new r["xb"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),j=function(){const e=new r["xb"];return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),D=function(){const e=new r["xb"];return function(t,i){const s=n.domElement;if(n.object.isPerspectiveCamera){const r=n.object.position;e.copy(r).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),H(2*t*o/s.clientHeight,n.object.matrix),j(2*i*o/s.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(H(t*(n.object.right-n.object.left)/n.object.zoom/s.clientWidth,n.object.matrix),j(i*(n.object.top-n.object.bottom)/n.object.zoom/s.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function F(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?g/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function $(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?g*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function B(e,t){if(!n.zoomToCursor)return;L=!0;const i=n.domElement.getBoundingClientRect(),s=e-i.left,r=t-i.top,o=i.width,a=i.height;S.x=s/o*2-1,S.y=-r/a*2+1,R.set(S.x,S.y,1).unproject(n.object).sub(n.object.position).normalize()}function U(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function z(e){b.set(e.clientX,e.clientY)}function G(e){B(e.clientX,e.clientX),y.set(e.clientX,e.clientY)}function K(e){x.set(e.clientX,e.clientY)}function V(e){A.set(e.clientX,e.clientY),v.subVectors(A,b).multiplyScalar(n.rotateSpeed);const t=n.domElement;k(2*Math.PI*v.x/t.clientHeight),N(2*Math.PI*v.y/t.clientHeight),b.copy(A),n.update()}function Y(e){_.set(e.clientX,e.clientY),T.subVectors(_,y),T.y>0?F(P(T.y)):T.y<0&&$(P(T.y)),y.copy(_),n.update()}function X(e){w.set(e.clientX,e.clientY),E.subVectors(w,x).multiplyScalar(n.panSpeed),D(E.x,E.y),x.copy(w),n.update()}function q(e){B(e.clientX,e.clientY),e.deltaY<0?$(P(e.deltaY)):e.deltaY>0&&F(P(e.deltaY)),n.update()}function W(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?N(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):D(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?N(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):D(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?k(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):D(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?k(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):D(-n.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),n.update())}function Z(e){if(1===C.length)b.set(e.pageX,e.pageY);else{const t=_e(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);b.set(n,i)}}function J(e){if(1===C.length)x.set(e.pageX,e.pageY);else{const t=_e(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);x.set(n,i)}}function Q(e){const t=_e(e),n=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(n*n+i*i);y.set(0,s)}function ee(e){n.enableZoom&&Q(e),n.enablePan&&J(e)}function te(e){n.enableZoom&&Q(e),n.enableRotate&&Z(e)}function ne(e){if(1==C.length)A.set(e.pageX,e.pageY);else{const t=_e(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);A.set(n,i)}v.subVectors(A,b).multiplyScalar(n.rotateSpeed);const t=n.domElement;k(2*Math.PI*v.x/t.clientHeight),N(2*Math.PI*v.y/t.clientHeight),b.copy(A)}function ie(e){if(1===C.length)w.set(e.pageX,e.pageY);else{const t=_e(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);w.set(n,i)}E.subVectors(w,x).multiplyScalar(n.panSpeed),D(E.x,E.y),x.copy(w)}function se(e){const t=_e(e),i=e.pageX-t.x,s=e.pageY-t.y,r=Math.sqrt(i*i+s*s);_.set(0,r),T.set(0,Math.pow(_.y/y.y,n.zoomSpeed)),F(T.y),y.copy(_);const o=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);B(o,a)}function re(e){n.enableZoom&&se(e),n.enablePan&&ie(e)}function oe(e){n.enableZoom&&se(e),n.enableRotate&&ne(e)}function ae(e){!1!==n.enabled&&(0===C.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",le),n.domElement.addEventListener("pointerup",ce)),Ee(e)||(xe(e),"touch"===e.pointerType?be(e):he(e)))}function le(e){!1!==n.enabled&&("touch"===e.pointerType?Ae(e):ue(e))}function ce(e){switch(we(e),C.length){case 0:n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",le),n.domElement.removeEventListener("pointerup",ce),n.dispatchEvent(c),s=i.NONE;break;case 1:const t=C[0],r=M[t];be({pointerId:t,pageX:r.x,pageY:r.y});break}}function he(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r["I"].DOLLY:if(!1===n.enableZoom)return;G(e),s=i.DOLLY;break;case r["I"].ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;K(e),s=i.PAN}else{if(!1===n.enableRotate)return;z(e),s=i.ROTATE}break;case r["I"].PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;z(e),s=i.ROTATE}else{if(!1===n.enablePan)return;K(e),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(l)}function ue(e){switch(s){case i.ROTATE:if(!1===n.enableRotate)return;V(e);break;case i.DOLLY:if(!1===n.enableZoom)return;Y(e);break;case i.PAN:if(!1===n.enablePan)return;X(e);break}}function de(e){!1!==n.enabled&&!1!==n.enableZoom&&s===i.NONE&&(e.preventDefault(),n.dispatchEvent(l),q(pe(e)),n.dispatchEvent(c))}function pe(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!I&&(n.deltaY*=10),n}function me(e){if("Control"===e.key){I=!0;const e=n.domElement.getRootNode();e.addEventListener("keyup",ge,{passive:!0,capture:!0})}}function ge(e){if("Control"===e.key){I=!1;const e=n.domElement.getRootNode();e.removeEventListener("keyup",ge,{passive:!0,capture:!0})}}function fe(e){!1!==n.enabled&&!1!==n.enablePan&&W(e)}function be(e){switch(ye(e),C.length){case 1:switch(n.touches.ONE){case r["qb"].ROTATE:if(!1===n.enableRotate)return;Z(e),s=i.TOUCH_ROTATE;break;case r["qb"].PAN:if(!1===n.enablePan)return;J(e),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(n.touches.TWO){case r["qb"].DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;ee(e),s=i.TOUCH_DOLLY_PAN;break;case r["qb"].DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;te(e),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&n.dispatchEvent(l)}function Ae(e){switch(ye(e),s){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;ne(e),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;ie(e),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;re(e),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;oe(e),n.update();break;default:s=i.NONE}}function ve(e){!1!==n.enabled&&e.preventDefault()}function xe(e){C.push(e.pointerId)}function we(e){delete M[e.pointerId];for(let t=0;t<C.length;t++)if(C[t]==e.pointerId)return void C.splice(t,1)}function Ee(e){for(let t=0;t<C.length;t++)if(C[t]==e.pointerId)return!0;return!1}function ye(e){let t=M[e.pointerId];void 0===t&&(t=new r["wb"],M[e.pointerId]=t),t.set(e.pageX,e.pageY)}function _e(e){const t=e.pointerId===C[0]?C[1]:C[0];return M[t]}n.domElement.addEventListener("contextmenu",ve),n.domElement.addEventListener("pointerdown",ae),n.domElement.addEventListener("pointercancel",ce),n.domElement.addEventListener("wheel",de,{passive:!1});const Te=n.domElement.getRootNode();Te.addEventListener("keydown",me,{passive:!0,capture:!0}),this.update()}}
/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class m{constructor(e,t,n,i,s="div"){this.parent=e,this.object=t,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("name"),m.nextNameID=m.nextNameID||0,this.$name.id="lil-gui-name-"+ ++m.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class g extends m{constructor(e,t,n){super(e,t,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function f(e){let t,n;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!n&&"#"+n}const b={isPrimitive:!0,match:e=>"string"==typeof e,fromHexString:f,toHexString:f},A={isPrimitive:!0,match:e=>"number"==typeof e,fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},v={isPrimitive:!1,match:Array.isArray,fromHexString(e,t,n=1){const i=A.fromHexString(e);t[0]=(i>>16&255)/255*n,t[1]=(i>>8&255)/255*n,t[2]=(255&i)/255*n},toHexString:([e,t,n],i=1)=>A.toHexString(e*(i=255/i)<<16^t*i<<8^n*i<<0)},x={isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t,n=1){const i=A.fromHexString(e);t.r=(i>>16&255)/255*n,t.g=(i>>8&255)/255*n,t.b=(255&i)/255*n},toHexString:({r:e,g:t,b:n},i=1)=>A.toHexString(e*(i=255/i)<<16^t*i<<8^n*i<<0)},w=[b,A,v,x];class E extends m{constructor(e,t,n,i){var s;super(e,t,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(s=this.initialValue,w.find(e=>e.match(s))),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const e=f(this.$text.value);e&&this._setValueFromHexString(e)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class y extends m{constructor(e,t,n){super(e,t,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",e=>{e.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class _ extends m{constructor(e,t,n,i,s,r){super(e,t,n,"number"),this._initInput(),this.min(i),this.max(s);const o=void 0!==r;this.step(o?r:this._getImplicitStep(),o),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=e=>{const t=parseFloat(this.$input.value);isNaN(t)||(this._snapClampSetValue(t+e),this.$input.value=this.getValue())};let t,n,i,s,r,o=!1;const a=e=>{if(o){const i=e.clientX-t,s=e.clientY-n;Math.abs(s)>5?(e.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(i)>5&&l()}if(!o){const t=e.clientY-i;r-=t*this._step*this._arrowKeyMultiplier(e),s+r>this._max?r=this._max-s:s+r<this._min&&(r=this._min-s),this._snapClampSetValue(s+r)}i=e.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{let e=parseFloat(this.$input.value);isNaN(e)||(this._stepExplicit&&(e=this._snap(e)),this.setValue(this._clamp(e)))}),this.$input.addEventListener("keydown",t=>{"Enter"===t.code&&this.$input.blur(),"ArrowUp"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t))),"ArrowDown"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t)*-1))}),this.$input.addEventListener("wheel",t=>{this._inputFocused&&(t.preventDefault(),e(this._step*this._normalizeMouseWheel(t)))},{passive:!1}),this.$input.addEventListener("mousedown",e=>{t=e.clientX,n=i=e.clientY,o=!0,s=this.getValue(),r=0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=e=>{const t=this.$slider.getBoundingClientRect();let n=(i=e,s=t.left,r=t.right,o=this._min,a=this._max,(i-s)/(r-s)*(a-o)+o);var i,s,r,o,a;this._snapClampSetValue(n)},t=t=>{e(t.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};let i,s,r=!1;const o=t=>{t.preventDefault(),this._setDraggingStyle(!0),e(t.touches[0].clientX),r=!1},a=t=>{if(r){const e=t.touches[0].clientX-i,n=t.touches[0].clientY-s;Math.abs(e)>Math.abs(n)?o(t):(window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l))}else t.preventDefault(),e(t.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l)},c=this._callOnFinishChange.bind(this);let h;this.$slider.addEventListener("mousedown",i=>{this._setDraggingStyle(!0),e(i.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)}),this.$slider.addEventListener("touchstart",e=>{e.touches.length>1||(this._hasScrollBar?(i=e.touches[0].clientX,s=e.touches[0].clientY,r=!0):o(e),window.addEventListener("touchmove",a,{passive:!1}),window.addEventListener("touchend",l))},{passive:!1}),this.$slider.addEventListener("wheel",e=>{if(Math.abs(e.deltaX)<Math.abs(e.deltaY)&&this._hasScrollBar)return;e.preventDefault();const t=this._normalizeMouseWheel(e)*this._step;this._snapClampSetValue(this.getValue()+t),this.$input.value=this.getValue(),clearTimeout(h),h=setTimeout(c,400)},{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),t+-n}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class T extends m{constructor(e,t,n,i){super(e,t,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(i)?i:Object.values(i),this._names=Array.isArray(i)?i:Object.keys(i),this._names.forEach(e=>{const t=document.createElement("option");t.innerHTML=e,this.$select.appendChild(t)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class R extends m{constructor(e,t,n){super(e,t,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",e=>{"Enter"===e.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let S=!1;class L{constructor({parent:e,autoPlace:t=void 0===e,container:n,width:i,title:s="Controls",injectStyles:r=!0,touchStyles:o=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),o&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!S&&r&&(function(e){const t=document.createElement("style");t.innerHTML=e;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(t,n):document.head.appendChild(t)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"↕";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"▾";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"▸"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"✓";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),S=!0),n?n.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this.domElement.addEventListener("keydown",e=>e.stopPropagation()),this.domElement.addEventListener("keyup",e=>e.stopPropagation())}add(e,t,n,i,s){if(Object(n)===n)return new T(this,e,t,n);const r=e[t];switch(typeof r){case"number":return new _(this,e,t,n,i,s);case"boolean":return new g(this,e,t);case"string":return new R(this,e,t);case"function":return new y(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",r)}addColor(e,t,n=1){return new E(this,e,t,n)}addFolder(e){return new L({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(t=>{t instanceof y||t._name in e.controllers&&t.load(e.controllers[t._name])}),t&&e.folders&&this.folders.forEach(t=>{t._title in e.folders&&t.load(e.folders[t._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(e=>{if(!(e instanceof y)){if(e._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${e._name}"`);t.controllers[e._name]=e.save()}}),e&&this.folders.forEach(e=>{if(e._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${e._title}"`);t.folders[e._title]=e.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const n=e=>{e.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const i=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=i+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(e=>e.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const C=new o["a"];var M={data(){return{state3:{time:0},renderer3:null,scene:null,camera:null,cube:null}},mounted(){this.init3(),this.animate3(),requestAnimationFrame(this.animate3)},methods:{init3(){const e=document.querySelector("#c3");this.renderer=new r["zb"]({antialias:!0,canvas:e}),this.camera=new r["Y"](100,2,.1,80),this.camera.position.set(-1,.5,3);class t{constructor(e,t,n,i){this.obj=e,this.minProp=t,this.maxProp=n,this.minDif=i}get min(){return this.obj[this.minProp]}set min(e){this.obj[this.minProp]=e,this.obj[this.maxProp]=Math.max(this.obj[this.maxProp],e+this.minDif)}get max(){return this.obj[this.maxProp]}set max(e){this.obj[this.maxProp]=e,this.min=this.min}}const n=new L;n.add(this.camera,"fov",1,180).onChange(this.updateCamera);const i=new t(this.camera,"near","far",.1);n.add(i,"min",.1,50,.1).name("near").onChange(this.updateCamera),n.add(i,"max",.1,50,.1).name("far").onChange(this.updateCamera),n.add(this.camera.position,"x",-10,10).name("cameraX"),n.add(this.camera.position,"y",-10,10).name("cameraY"),n.add(this.camera.position,"z",-10,10).name("cameraZ");const s=new p(this.camera,e);s.target.set(0,0,0),s.update(),this.scene=new r["kb"],this.scene.background=new r["h"]("black");{const e=10,t=new r["sb"],n=t.load("https://threejs.org/manual/examples/resources/images/checker.png");n.wrapS=r["ib"],n.wrapT=r["ib"],n.magFilter=r["S"];const i=e/2;n.repeat.set(i,i);const s=new r["ab"](e,e),o=new r["O"]({map:n,side:r["k"]}),a=new r["M"](s,o);a.rotation.x=-.5*Math.PI,this.scene.add(a)}const o=new r["d"](1,1,1),a=new r["O"]({color:"#FFDD11"});this.cube=new r["M"](o,a),this.cube.position.set(10,0,0),this.scene.add(this.cube);const l=this.scene;C.load("stone.glb",(function(e){l.add(e.scene)}),void 0,(function(e){console.error(e)}));const c=16777215,h=3,u=new r["j"](c,h);u.position.set(-1,2,4),this.scene.add(u),this.renderer.render(this.scene,this.camera)},updateCamera(){this.camera.updateProjectionMatrix()},resizeRendererToDisplaySize(e){const t=e.domElement,n=t.clientWidth,i=t.clientHeight,s=t.width!==n||t.height!==i;return s&&e.setSize(n,i,!1),s},render3(){if(this.resizeRendererToDisplaySize(this.renderer)){const e=this.renderer.domElement;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix()}const e=.1,t=this.state3.time*e;this.cube.rotation.x=t,this.cube.rotation.y=t,this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render3)},animate3(e){this.state3.time=.01*e,this.render3(),requestAnimationFrame(this.animate3)}}},I=M,O=(n("51f6"),n("2be6")),P=Object(O["a"])(I,i,s,!1,null,"e4c71d28",null);t["default"]=P.exports},a423:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper pa-4"},[t("h1",[e._v("画线（Drawing lines）")]),t("canvas",{staticClass:"full-bleed",attrs:{id:"c"}}),t("highlightjs",{staticClass:"mt-4",attrs:{code:"//..\n// 线 材质\nconst material1 = new THREE.LineBasicMaterial( { color: 0x0000ff } );\nconst points = [];\npoints.push( new THREE.Vector3( - 10, 0, 0 ) );\npoints.push( new THREE.Vector3( 0, 10, 0 ) );\npoints.push( new THREE.Vector3( 10, 0, 0 ) );\n// 线 几何体\nconst geometry1 = new THREE.BufferGeometry().setFromPoints( points );\nconst line = new THREE.Line( geometry1, material1 );\nscene.add(line);\n//..",language:"js"}})],1)},s=[],r=(n("0894"),n("8bc7")),o={data(){return{fov:75,aspect:2,near:.1,far:5,boxWidth:1,boxHeight:1,boxDepth:1}},mounted(){this.main()},methods:{main(){const e=document.querySelector("#c"),t=new r["zb"]({antialias:!0,canvas:e});t.setSize(window.innerWidth,window.innerHeight-300,!1);const n=new r["Y"](90,window.innerWidth/window.innerHeight,1,500);n.position.set(0,0,15),n.lookAt(0,0,-.2);const i=new r["kb"],s=new r["d"](1,1,1),o=new r["O"]({color:"#FFDD11"}),a=new r["M"](s,o);i.add(a);const l=new r["z"]({color:255}),c=[];c.push(new r["xb"](-10,0,0)),c.push(new r["xb"](0,10,0)),c.push(new r["xb"](10,0,0));const h=(new r["f"]).setFromPoints(c),u=new r["y"](h,l);i.add(u),t.render(i,n);const d=16777215,p=3,m=new r["j"](d,p);function g(e){const t=e.domElement,n=t.clientWidth,i=t.clientHeight,s=t.width!==n||t.height!==i;return s&&e.setSize(n,i,!1),s}function f(e){if(e*=.001,g(t)){const e=t.domElement;n.aspect=e.clientWidth/e.clientHeight,n.updateProjectionMatrix()}a.rotation.x=e,a.rotation.y=e,t.render(i,n),requestAnimationFrame(f)}m.position.set(-1,2,4),i.add(m),requestAnimationFrame(f)}}},a=o,l=(n("59bb"),n("2be6")),c=Object(l["a"])(a,i,s,!1,null,"bfebeb9a",null);t["default"]=c.exports},aaf8:function(e,t,n){},ad58:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper pa-4"},[t("h1",[e._v("载入3D模型（Loading 3D models）")]),t("canvas",{staticClass:"full-bleed",attrs:{id:"c"}}),t("highlightjs",{staticClass:"mt-4",attrs:{code:""+e.code,language:"js"}})],1)},s=[],r=n("8bc7"),o=n("2f5b");const a=new o["a"];var l={data(){return{fov:75,aspect:2,near:.1,far:5,boxWidth:1,boxHeight:1,boxDepth:1,code:"// 加载 glb 文件\n// 这个可以的 但是我在vue目录 和 /public里都放了一个\nloader.load( 'stone.glb', function ( gltf ) {\n  scene.add( gltf.scene );\n}, undefined, function ( error ) {\n  console.error( error );\n} );\n\n// 加载 gltf 文件 \n// 放在 /public 里\nloader.load( '/free_ac_unit/scene.gltf', function ( gltf ) {\n  scene.add( gltf.scene );\n}, undefined, function ( error ) {\n  console.error( error );\n} );\n\n// 加载 gltf 文件\n// 放在GitHub上文件路径有问题 铐\nloader.load( '/stylized_stones_props/scene.gltf', function ( gltf ) {\n  scene.add( gltf.scene );\n}, undefined, function ( error ) {\n  console.error( error );\n} );"}},mounted(){this.main()},methods:{main(){const e=document.querySelector("#c"),t=new r["zb"]({antialias:!0,canvas:e});t.setSize(window.innerWidth,window.innerHeight-300,!1);const n=new r["Y"](65,window.innerWidth/window.innerHeight,1,500);n.position.set(0,0,5),n.lookAt(0,0,-.2);const i=new r["kb"],s=new r["d"](1,1,1),o=new r["O"]({color:"#FFDD11"}),l=new r["M"](s,o);l.position.set(2,0,0),i.add(l),a.load("stone.glb",(function(e){i.add(e.scene)}),void 0,(function(e){console.error(e)})),t.render(i,n);const c=16777215,h=3,u=new r["j"](c,h);function d(e){const t=e.domElement,n=t.clientWidth,i=t.clientHeight,s=t.width!==n||t.height!==i;return s&&e.setSize(n,i,!1),s}function p(e){if(e*=.001,d(t)){const e=t.domElement;n.aspect=e.clientWidth/e.clientHeight,n.updateProjectionMatrix()}l.rotation.x=e,l.rotation.y=e,t.render(i,n),requestAnimationFrame(p)}u.position.set(-1,2,4),i.add(u),requestAnimationFrame(p)}}},c=l,h=(n("5b23"),n("2be6")),u=Object(h["a"])(c,i,s,!1,null,"34c7ad35",null);t["default"]=u.exports},ae5d:function(e,t,n){"use strict";var i=TypeError;e.exports=function(e,t){if(e<t)throw new i("Not enough arguments");return e}},b03e:function(e,t,n){},b53d:function(e,t,n){"use strict";var i=n("ef30"),s=n("70b7"),r=n("2a3e"),o=n("ae5d"),a=URLSearchParams,l=a.prototype,c=s(l.getAll),h=s(l.has),u=new a("a=1");!u.has("a",2)&&u.has("a",void 0)||i(l,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return h(this,e);var i=c(this,e);o(t,1);var s=r(n),a=0;while(a<i.length)if(i[a++]===s)return!0;return!1}),{enumerable:!0,unsafe:!0})},d8aa:function(e,t,n){},e8afc:function(e,t,n){"use strict";n("2063")}}]);
//# sourceMappingURL=threejs.599b04f5.js.map